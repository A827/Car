<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Motoria ‚Ä¢ Admin CMS</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="cms.css" />
</head>
<body>
  <!-- Header -->
  <header class="site-header" id="siteHeader">
    <div class="container header-inner">
      <a class="brand" href="index.html" aria-label="Motoria home">
        <svg class="logo" viewBox="0 0 64 64" aria-hidden="true">
          <rect x="4" y="20" width="56" height="24" rx="6"></rect>
          <circle cx="20" cy="48" r="6"></circle>
          <circle cx="48" cy="48" r="6"></circle>
        </svg>
        <span class="brand-name">Motoria</span>
      </a>
      <nav class="nav" aria-label="Primary">
        <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="navMenu" aria-label="Open menu">
          <span></span><span></span><span></span>
        </button>
        <ul id="navMenu" class="nav-menu">
          <li><a href="results.html">Buy</a></li>
          <li><a href="#">Sell</a></li>
          <li><a href="#">Finance</a></li>
          <li><a href="#">Dealers</a></li>
          <li class="divider" aria-hidden="true"></li>
          <li id="authSlot"></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="container cms">
    <aside class="cms-side glass">
      <div class="cms-head">
        <div class="avatar">üõ†Ô∏è</div>
        <div>
          <div class="name" id="adminName">Admin</div>
          <div class="muted small" id="adminEmail">admin@motoria.test</div>
        </div>
      </div>
      <button class="tablink active" data-view="taxonomy">Makes & Models</button>
      <button class="tablink" data-view="dealers">Dealers</button>
      <button class="tablink" data-view="import">Import / Export</button>
      <button class="tablink" data-view="help">Help</button>
    </aside>

    <section class="cms-main">
      <!-- Taxonomy -->
      <section class="panel active" id="panel-taxonomy">
        <div class="panel-head">
          <h2>Makes & Models</h2>
          <div class="row">
            <input id="searchMake" class="filter" placeholder="Search makes‚Ä¶" />
            <button id="publishBtn" class="btn btn-primary">Publish</button>
          </div>
        </div>

        <div class="grid">
          <div class="card glass">
            <h3>Add / Edit Make</h3>
            <form id="makeForm" class="form-col">
              <input type="hidden" name="index" />
              <label>Make name
                <input name="name" placeholder="e.g. Kia" required />
              </label>
              <div class="row">
                <button class="btn btn-primary" type="submit">Save make</button>
                <button id="cancelMakeEdit" class="btn btn-ghost" type="button" hidden>Cancel</button>
              </div>
            </form>
          </div>

          <div class="card glass">
            <h3>Add Model to <span id="currentMake">‚Äî</span></h3>
            <form id="modelForm" class="form-col">
              <label>Model name
                <input name="model" placeholder="e.g. Sportage" required />
              </label>
              <div class="row">
                <button class="btn btn-primary" type="submit" id="addModelBtn" disabled>Add model</button>
              </div>
            </form>
          </div>
        </div>

        <div class="taxo-wrap">
          <div id="makeList" class="make-list"></div>
          <div id="modelList" class="model-list"></div>
        </div>
      </section>

      <!-- Dealers -->
      <section class="panel" id="panel-dealers">
        <div class="panel-head">
          <h2>Dealers</h2>
          <div class="row">
            <input id="dealerSearch" class="filter" placeholder="Search dealers by name, email, company‚Ä¶" />
            <button id="exportDealersCsv" class="btn btn-ghost">Export CSV</button>
          </div>
        </div>

        <div class="card glass">
          <div class="tbl head">
            <div>Name</div>
            <div>Company</div>
            <div>Email</div>
            <div>Phone</div>
            <div>Status</div>
            <div>Promoted</div>
            <div>Leads</div>
            <div>Actions</div>
          </div>
          <div id="dealerRows" class="tbl body"></div>
        </div>
      </section>

      <!-- Import / Export -->
      <section class="panel" id="panel-import">
        <div class="panel-head">
          <h2>Import / Export</h2>
        </div>
        <div class="glass block">
          <div class="block-head"><h3>Export current taxonomy</h3></div>
          <button id="exportJson" class="btn btn-ghost">Download JSON</button>
        </div>
        <div class="glass block">
          <div class="block-head"><h3>Import taxonomy (JSON)</h3></div>
          <label class="btn btn-ghost filebtn">
            Choose file
            <input id="importJson" type="file" accept="application/json,.json" hidden />
          </label>
        </div>
      </section>

      <!-- Help -->
      <section class="panel" id="panel-help">
        <div class="panel-head"><h2>Help</h2></div>
        <div class="glass-min">
          <p><strong>Publish</strong> saves your makes & models to the site-wide store so dropdowns on search and listing forms update instantly.</p>
          <p>Only <em>Admins</em> can access this page. Demo admin: <code>admin@motoria.test</code> / <code>motoria123</code>.</p>
          <p><strong>Dealers</strong> lets you verify/unverify dealers, mark as promoted, keep notes & KYC file names, and track leads.</p>
        </div>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <div class="brand-footer">
          <svg class="logo" viewBox="0 0 64 64" aria-hidden="true">
            <rect x="4" y="20" width="56" height="24" rx="6"></rect>
            <circle cx="20" cy="48" r="6"></circle>
            <circle cx="48" cy="48" r="6"></circle>
          </svg>
          <span>Motoria</span>
        </div>
        <p class="muted">¬© <span id="year"></span> Motoria Ltd.</p>
      </div>
    </div>
  </footer>

  <!-- Dealer Edit Modal -->
  <div id="editModal" class="modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="editTitle">
      <div class="modal-head">
        <h3 id="editTitle">Edit dealer</h3>
        <button class="btn-icon" id="modalClose" aria-label="Close">‚úï</button>
      </div>
      <form id="dealerForm" class="form-col">
        <input type="hidden" name="email" />
        <label>Dealer name
          <input name="name" placeholder="Dealer name" required />
        </label>
        <label>Company
          <input name="company" placeholder="Company" />
        </label>
        <label>Email
          <input name="email_view" placeholder="Email" disabled />
        </label>
        <label>Phone
          <input name="phone" placeholder="Phone" />
        </label>
        <label class="row">
          <input type="checkbox" name="promoted" />
          <span>Promote dealer (featured)</span>
        </label>
        <label>Admin notes
          <textarea name="notes" rows="4" placeholder="Internal notes visible only to admins"></textarea>
        </label>

        <div class="kyc">
          <div class="block-head"><h4>KYC / Documents</h4></div>
          <div class="row">
            <label class="btn btn-ghost filebtn">
              Add files
              <input id="kycInput" type="file" multiple hidden />
            </label>
            <span class="muted small">Filenames are stored (demo). No file upload backend.</span>
          </div>
          <ul id="kycList" class="kyc-list"></ul>
        </div>

        <div class="row" style="justify-content:flex-end;margin-top:6px">
          <button class="btn btn-ghost" type="button" id="modalCancel">Cancel</button>
          <button class="btn btn-primary" type="submit">Save changes</button>
        </div>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
  <script src="cms.js"></script>
</body>
</html>